{% extends "base.html" %} {% block title %}Todos{% endblock title %}
{% block content %}

<p>
    <h1>Todo Lists</h1>
    <a class="create-link" href="{% url 'todo_create' %}">Create a new list</a>
</p>
{% if not lists %}
    <h2>No Todo Lists Found</h2>
{% endif %}

{% for list in lists %}
    <h2>{{ list.title }}</h2>
    <form action="{% url 'delete_todo_list' list.id %}" method="POST" style="display:inline;">
        {% csrf_token %}
        <button type="submit" onclick="return confirm('Are You sure to remove the list?')">üóëÔ∏è Delete List</button>
    </form>
    <div class="table-responsive shadow-lg border border-dark">
        <table class="col-12">
            <thead>
                <tr>
                    <th class="col-8">Title</th>
                    <th class="col-2 text-center">Status</th>
                    <th class="col-1">Change Status</th>
                    <th class="col-1">Remove</th>
                </tr>
            </thead>
            <tbody>
                {% for todo in list.todoitem_set.all %}
                    <tr>
                        <td>{{ todo.title }}</td>
                        <td class="text-center">
                            {% if todo.completed %}
                                <span class="badge badge-success">Completed</span>
                            {% else %}
                                <span class="badge badge-danger">Not Completed</span>
                            {% endif %}
                        </td>
                        <td class="text-center">
                            <form action="{% url 'change_todo_item_status' todo.id %}" method="POST" style="display:inline;">
                                {% csrf_token %}
                                <button type="submit" onclick="return confirm('Are You sure to change the components status?')">üîÑÔ∏è</button>
                            </form>
                        </td>
                        <td class="text-center">
                            <form action="{% url 'delete_todo_item' todo.id %}" method="POST" style="display:inline;">
                                {% csrf_token %}
                                <button type="submit" onclick="return confirm('Are You sure to remove the component?')">üóëÔ∏è</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div><br>
{% endfor %}

{% endblock content %}
